# Эндпоинт, отдающий пользователей

## Условие

Вы пришли на проект, в котором есть сервис, отдающий всех пользователей.
`GET /users`

В какой-то момент пользователей стало слишком много и начались проблемы, как это исправить?

## Решение

### Стандартная пагинация

Данная задача требует имплементации механизма пагинации. Это значит, что пользователи должны отдаваться небольшими пачками.

Например, можно добавить следующие query-параметры в метод:

* `offset` - то, на сколько вхождений мы должны сдвинуться в таблице в базе данных от начала поиска
* `limit` - то, сколько вхождений мы должны получить из таблицы в базе данных

На эти query-параметры также следует наложить некоторые ограничения: `offset` очевидно не может быть меньше 0 или больше количества вхождений в таблице базы данных.

Ситуация с параметром `limit` уже сложнее, поскольку у каждого сервиса свое понимание того, сколько максимум пользователей за раз он должен уметь отдать.

Предположим, что верхняя граница должна быть не больше 500 (или количества пользователей, если их меньше, чем 500).

Помимо этого, можно учесть, что мы хотим отсчитывать `offset` с конца, а не с начала. В таком случае, имеет смысл добавить булевый query-параметр `reversed`, который не обязателен к заполнению и по умолчанию имеет значение `false`.

Конечный вид эндпоинта:

```javascript
GET /users
Query parameters:
- offset 
- limit
- reversed?
```

Пример:

```javascript
GET /users?offset=10&limit=100&reversed=false
```

### Бесконечный скролл

Вторым решением является спроектировать `api` для использования 'бесконечной' скролла.

Современные интерфейсы и `api` на данный момент чаще всего прибегают к этому виду скролла.

Для реализации нам необходимо понимание того, сколько элементов необходимо взять (take) и начиная с какого элемета (afterToken) это делать.

Ну и параметр `reversed` по примеру выше.

В таком случае, эндпоинт будет вида:

```javascript
GET /users
Query params:
- take
- afterToken?
- reversed?
```

Пример:

```javascript
GET /users?take=10&afterToken=15&reversed=false
```
