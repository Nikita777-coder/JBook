# Раннее и Позднее Связывание

- [Раннее и Позднее Связывание](#раннее-и-позднее-связывание)
    - [Введение](#введение)
    - [Раннее связывание](#раннее-связывание)
    - [Позднее связывание](#позднее-связывание)
    - [Заключение](#заключение)
    - [Полезные ссылки](#полезные-ссылки)

## Введение

Связывание означает наличие связи между ссылкой и кодом, который надо вызвать при обращении. Например, вызывая метод вы ссылаетесь на место в коде в котором он определен. Аналогично дело обстоит и с переменными.

Существует два типа связывания методов в языке Java: ранее связывание (его ещё называют статическим) и позднее (динамическое) связывание.

Разница между ними - это то, в какой момент мы понимаем эту связь и то, что надо вызвать: на этапе компиляции или во время выполнения кода?

## Раннее связывание

Раннее связывание носит более статический характер, так как происходит во время компиляции, то есть уже на этапе компиляции мы обладаем всем необходимым, чтобы понять какой метод необходимо вызвать. Поскольку это относится к ранней стадии жизненного цикла программы (этап компиляции), то это называется ранним связыванием (early binding).

В случае статического связывания используются не конкретные объекты, а информация о типе, то есть для обнаружения нужного метода используется тип ссылочной переменной.

Давайте рассмотрим пример:

```java
public class Main {
    public static void main(String[] args) {
        Parent p = new Child();
        Child ch = new Child();

        p.test(1);
        ch.test(2);
    }

    static class Parent {
        public static void test(int k) {
            System.out.println("Static Parent " + k);
        }
    }

    static class Child extends Parent {
        public static void test(int k) {
            System.out.println("Static Child " + k);
        }
    }
}
```

Теперь давайте ответим на вопрос: может ли компилятор в месте вызова 1 или месте вызова 2 понять какой метод нужно вызвать?

Да, может по типу ссылки, ведь методы статические, а значит принадлежат классу.

Раннее связывание используется в языке Java для разрешения перегруженных, статических и `final` методов.

## Позднее связывание

С другой стороны, динамическое связывание происходит во время выполнения кода. В этом случае определение того, какой метод вызвать, происходит конкретным объектом. Т.е. для нахождения нужного метода в Java используется конкретный объект. Ну а поскольку это происходит на поздней стадии жизненного цикла программы (во время выполнения), то называется поздним связыванием (late binding).

Объявим классы Person и Employee:

```java
class Person {
    public void greeting() {
        System.out.println("Person greeting");
    }
}

class Employee extends Person {
    public void greeting() {
        System.out.println("Employee greeting");
    }
}
```

Дочерний класс переопределяет метод родительского.

```java
public class Main {
    public static void main(String[] args) {
        Person p = new Person();
        greeting(p);
        
        Employee e = new Employee();
        greeting(e);
    }

    public static void greeting(Person p) {
        // Место вызова
        p.greeting();
    }
}
```

Теперь давайте ответим на вопрос: может ли компилятор в месте вызова `p.greeting();` понять какой метод нужно вызвать?

На момент компиляции это невозможно, так как в метод `greeting` может быть передан как объект родительского класса, так и дочерних. В свою очередь, в дочерних классах метод может быть переопределен.

Поэтому в данном случае ответ: нет, компилятор не может ответить на этот вопрос. Поэтому в данном случае будет позднее связывание ссылки и вызываемого кода. Во время выполнения кода вызов метода будет зависеть от переданного объекта.

Позднее связывание используется в Java для методов, которые были переопределены в подклассах (override).

## Заключение

Статическое связывание происходит во время компиляции, а динамическое – во время выполнения.

Поскольку статическое связывание происходит на ранней стадии жизненного цикла программы, его называют ранним связыванием. Аналогично, динамическое связывание называют также поздним связыванием, поскольку оно происходит позже, во время работы программы.

Статическое связывание используется в языке Java для разрешения перегруженных, статических и `final` методов, в то время как динамическое связывание используется в языке Java для разрешения переопределенных методов.

## Полезные ссылки

1. [Раннее и Позднее Связывание](https://www.youtube.com/watch?v=oDpns6k9-iU)
